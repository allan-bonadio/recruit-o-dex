#!/bin/bash

echo "This starts up all the servers.  Checks so it won't start a second process."

here=`dirname $0`

# must start mongo for server to work
echo ":::::::::::::::::::::::::::::::::::: Starting up mongo DB"
if ! pgrep -f mongod
then
	mongod &
	sleep 2
fi


# must start server for webapp to run
echo ":::::::::::::::::::::::::::::::::::: Starting up backend server"
if ! pgrep -f rodexServer
then 
	./rodexServer.js &
	sleep 2
fi

# now run it
echo ":::::::::::::::::::::::::::::::::::: Starting up React Server"
if ! pgrep -f react-scripts/scripts/start.js
then 
	PORT=3300 EDITOR= TERM= npm start &
	sleep 2
fi
